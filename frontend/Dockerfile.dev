# SME Supply Chain Risk Analysis - Frontend Development Dockerfile
# Usage: docker build -f Dockerfile.dev -t sme-frontend-dev .
# For use with docker-compose.dev-full.yml

FROM node:24-slim

WORKDIR /app

# Copy package files first for layer caching
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy entrypoint script
COPY docker-entrypoint.sh /docker-entrypoint.sh
RUN chmod +x /docker-entrypoint.sh

# Copy application code (will be overridden by volume mount in dev)
COPY . .

# Enable polling for file watching in containers (required for Linux containers)
ENV WATCHPACK_POLLING=true
ENV CHOKIDAR_USEPOLLING=true

# Expose port for Next.js dev server
EXPOSE 3000

# Use entrypoint to sync deps, then run command
ENTRYPOINT ["/docker-entrypoint.sh"]
CMD ["npm", "run", "dev"]
